# load native .so which contains code for codecopy()
set $soaddr = (void*) dlopen("./codecopy.so", 2)
add-symbol-file "./codecopy.so" $soaddr

# get address of fread()
set $freadaddr = (char*) &'guest_func_fread'

# get address of target function
set $targetaddr = (void*)((uint64_t)$freadaddr ^ (1 << 25))

# call codecopy with appropriate arguments
print (int) codecopy($freadaddr, $targetaddr)

# ensure result was 0
if $1 != 0
print "!!!!!!! Error performing codecopy !!!!!!!"
end
