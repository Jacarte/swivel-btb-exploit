#!/bin/bash

GDB=gdb
LUCET_WASI=$LUCET_SRC/target/release/lucet-wasi
LUCET_WASI_ARGS='--heap-address-space 8GiB --max-heap-size 4GiB --stack-size 8MiB --dir /:/'

taskset -c 1 $GDB \
-ex "set breakpoint pending on" \
-ex "b *(lucet_context_bootstrap+49)" \
-ex "r" \
-x copycode.gdbcommands \
--args $LUCET_WASI $LUCET_WASI_ARGS ../btb_oop.so
